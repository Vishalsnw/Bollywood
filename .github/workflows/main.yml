name: Bollywood App Enhancements

on:
  push:
    branches:
      - main

jobs:
  enhance-ui:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: Install dependencies
        run: yarn install

      - name: Add Sidebar if not exists
        run: |
          mkdir -p src/components
          if [ ! -f src/components/Sidebar.js ]; then
            echo "import React from 'react';
import { Link } from 'react-router-dom';

const Sidebar = () => {
  return (
    <aside style={{ width: '200px', padding: '20px', background: '#eee' }}>
      <h3>Menu</h3>
      <ul>
        <li><Link to='/nominations'>Oscar Nominations</Link></li>
        <li><Link to='/winners'>Oscar Winners</Link></li>
        <li><Link to='/producers'>Producers</Link></li>
      </ul>
    </aside>
  );
};

export default Sidebar;" > src/components/Sidebar.js
          fi

      - name: Add WinnerReveal if not exists
        run: |
          mkdir -p src/features/oscars
          if [ ! -f src/features/oscars/WinnerReveal.js ]; then
            echo "import React, { useState } from 'react';
import { Fade } from '@mui/material';

const WinnerReveal = ({ winner }) => {
  const [show, setShow] = useState(false);

  return (
    <div style={{ marginTop: '20px' }}>
      <button onClick={() => setShow(true)}>Reveal Winner</button>
      <Fade in={show}>
        <div><h2 style={{ color: 'green' }}>{winner}</h2></div>
      </Fade>
    </div>
  );
};

export default WinnerReveal;" > src/features/oscars/WinnerReveal.js
          fi

      - name: Add ProducerList if not exists
        run: |
          mkdir -p src/features/producers
          if [ ! -f src/features/producers/ProducerList.js ]; then
            echo "import React from 'react';

const ProducerList = ({ producers }) => {
  const sorted = [...producers].sort((a, b) => b.wealth - a.wealth);

  return (
    <ul>
      {sorted.map((p, index) => (
        <li key={p.name}>
          #{index + 1} {p.name} - â‚¹{p.wealth} Cr
          {p.rankChange > 0 ? ' ðŸ”¼' : p.rankChange < 0 ? ' ðŸ”½' : ''}
        </li>
      ))}
    </ul>
  );
};

export default ProducerList;" > src/features/producers/ProducerList.js
          fi

      - name: Add NewsFeed if not exists
        run: |
          mkdir -p src/features/news
          if [ ! -f src/features/news/NewsFeed.js ]; then
            echo "import React from 'react';
import { Slide } from '@mui/material';

const NewsFeed = ({ news }) => {
  return (
    <div>
      <h2>Breaking News</h2>
      {news.map((item, idx) => (
        <Slide direction='up' in={true} mountOnEnter unmountOnExit key={idx}>
          <div style={{ background: '#fff3e0', padding: '10px', margin: '10px 0' }}>
            ðŸ“° {item.headline}
            {item.type === 'loan' && <span> ðŸ’¸ Took a loan</span>}
            {item.type === 'bankrupt' && <span> ðŸš¨ Bankrupt!</span>}
          </div>
        </Slide>
      ))}
    </div>
  );
};

export default NewsFeed;" > src/features/news/NewsFeed.js
          fi

      - name: Install peer UI dependencies
        run: yarn add react-router-dom @mui/material @emotion/react @emotion/styled

      - name: Build App
        run: yarn run build
