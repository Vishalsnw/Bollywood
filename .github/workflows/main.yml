name: Bollywood App Enhancements

on:
  push:
    branches:
      - main

jobs:
  enhance-ui:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: Install dependencies
        run: yarn install

      - name: Create Sidebar.js
        if: "!exists('src/components/Sidebar.js')"
        run: |
          mkdir -p src/components
          cat << 'EOF' > src/components/Sidebar.js
import React from "react";
import { Link } from "react-router-dom";

const Sidebar = () => {
  return (
    <aside style={{ width: "200px", padding: "20px", background: "#eee" }}>
      <h3>Menu</h3>
      <ul>
        <li><Link to="/nominations">Oscar Nominations</Link></li>
        <li><Link to="/winners">Oscar Winners</Link></li>
        <li><Link to="/producers">Producers</Link></li>
      </ul>
    </aside>
  );
};

export default Sidebar;
EOF

      - name: Create WinnerReveal.js
        if: "!exists('src/features/oscars/WinnerReveal.js')"
        run: |
          mkdir -p src/features/oscars
          cat << 'EOF' > src/features/oscars/WinnerReveal.js
import React, { useState } from "react";
import { Fade } from "@mui/material";

const WinnerReveal = ({ winner }) => {
  const [show, setShow] = useState(false);

  return (
    <div style={{ marginTop: "20px" }}>
      <button onClick={() => setShow(true)}>Reveal Winner</button>
      <Fade in={show}>
        <div>
          <h2 style={{ color: "green" }}>{winner}</h2>
        </div>
      </Fade>
    </div>
  );
};

export default WinnerReveal;
EOF

      - name: Create ProducerList.js
        if: "!exists('src/features/producers/ProducerList.js')"
        run: |
          mkdir -p src/features/producers
          cat << 'EOF' > src/features/producers/ProducerList.js
import React from "react";

const ProducerList = ({ producers }) => {
  const sorted = [...producers].sort((a, b) => b.wealth - a.wealth);

  return (
    <ul>
      {sorted.map((p, index) => (
        <li key={p.name}>
          #{index + 1} {p.name} - â‚¹{p.wealth} Cr
          {p.rankChange > 0 ? " ðŸ”¼" : p.rankChange < 0 ? " ðŸ”½" : ""}
        </li>
      ))}
    </ul>
  );
};

export default ProducerList;
EOF

      - name: Create NewsFeed.js
        if: "!exists('src/features/news/NewsFeed.js')"
        run: |
          mkdir -p src/features/news
          cat << 'EOF' > src/features/news/NewsFeed.js
import React from "react";
import { Slide } from "@mui/material";

const NewsFeed = ({ news }) => {
  return (
    <div>
      <h2>Breaking News</h2>
      {news.map((item, idx) => (
        <Slide direction="up" in={true} mountOnEnter unmountOnExit key={idx}>
          <div style={{ background: "#fff3e0", padding: "10px", margin: "10px 0" }}>
            ðŸ“° {item.headline}
            {item.type === "loan" && <span> ðŸ’¸ Took a loan</span>}
            {item.type === "bankrupt" && <span> ðŸš¨ Bankrupt!</span>}
          </div>
        </Slide>
      ))}
    </div>
  );
};

export default NewsFeed;
EOF

      - name: Install peer dependencies (e.g. react-router-dom)
        run: yarn add react-router-dom @mui/material @emotion/react @emotion/styled

      - name: Build project
        run: yarn run build
